---
title: "前端疑难杂症"
description: "前端面试"
pubDate: "2024-10-09"
image: /image/image4.jpg
categories:
  - 前端面试题
badge: "Pin"
---

## 浏览器相关

### 重绘和回流

- 重绘：当元素样式的改变不影响布局时，浏览器将使用重绘对元素进行更新，此时由于只需要UI层面的重新像素绘制，因此损耗较少
- 回流：当元素的尺寸、结构或触发某些属性时，浏览器会重新渲染页面，称为回流。此时，浏览器需要重新经过计算，计算后还需要重新布局，因此是较重的操作
- 重绘不一定会引起回流，回流一定会引起重绘
- 总结：页面的结构发生变化，引起回流，页面的样式发生变化，引起重绘。回流对性能影响较大，应该尽量避免。

### transfrom与marginLeft/top

1. 避免回流和重绘
   Margin-left：改变 margin-left 会触发布局重新计算（回流），进而可能触发屏幕重绘。
   Transform：使用 transform: translateX() 或 translateY() 不会触发布局重新计算，通常只触发合成层上的简单变换，减少了回流和重绘的开销。
2. 硬件加速
   Margin-left：不支持硬件加速，所有计算由 CPU 完成。
   Transform：可以利用 GPU 加速，将元素提升到合成层，由 GPU 处理绘制操作，提高性能。
3. 动画性能
   Margin-left：动画中频繁改变 margin-left 会导致卡顿，因为每次变化都涉及布局和绘制。
   Transform：在动画中使用 transform 可以实现平滑流畅的效果，因为这些操作可以在 GPU 上高效处理。
4. 合成层
   Margin-left：不会将元素提升到合成层，所有绘制操作都在主线程完成。
   Transform：使用 transform 会使元素被提升到合成层，允许并行处理，减少主线程负担。
5. 子元素的影响
   Margin-left：改变 margin-left 可能会影响子元素的位置，尤其是绝对定位的子元素，需要额外的布局计算。
   Transform：使用 transform 移动元素时，子元素的位置不受影响，减少了不必要的布局计算。
6. 实际应用中的优化建议
   批量修改：尽量减少对 DOM 的频繁操作，使用 requestAnimationFrame 或 setTimeout 来批量处理样式更改。
   避免强制同步布局：不要在脚本中读取布局信息后立即修改布局，避免强制同步布局计算。
   离线操作 DOM：使用 DocumentFragment 来构建复杂的 DOM 结构，然后一次性插入到文档中。
   CSS 类名切换：通过切换类名而不是直接修改内联样式来改变元素的样式。
   总结
   性能：transform 在动画和频繁更新的情况下提供更好的性能，因为它可以避免回流和重绘，并且可以利用 GPU 加速。
   兼容性：虽然 transform 需要添加前缀以确保跨浏览器兼容性，但现代浏览器已经广泛支持它。
   适用场景：对于简单的静态布局调整，margin-left 仍然有效；但对于动态内容或高性能动画，推荐使用 transform。


## js相关
### 原型与原型链
- 原型：每个函数都有一个 prototype 属性，指向一个对象，这个对象就是原型对象。
   - 原型可以放一些属性和方法，共亭给实例对象使用
   - 原型可以做继承
- 原型链：对象都有_proto属性，这个属性指向它的原型对象，原型对象也是对象,也有_proto_属性,指向原型对象的原型对象,这样一层一层形成的链式结构称为原型链，最顶层找不到则返回 null

### 闭包
- 闭包是指有权访问另一个函数作用域中的变量的函数
- 闭包的特性：
   - 函数嵌套函数
   - 函数内部可以引用外部的参数和变量
   - 参数和变量不会被垃圾回收机制回收
- 闭包的作用：
   - 读取函数内部的变量
   - 让这些变量的值始终保持在内存中
- 闭包的缺点：
   - 会常驻内存，增大内存使用量
   - 使用不当会造成内存泄漏
   

### 宏任务与微任务
- 宏任务：setTimeout、setInterval、I/O、UI渲染等
- 微任务：Promise、process.nextTick、MutationObserver等


## React相关
### diff算法
